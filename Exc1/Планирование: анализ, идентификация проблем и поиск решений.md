Задание 1. Анализ, идентификация проблем и решений, планирование
=

# Cуществующее и потенциальные проблемы
- SPR нарушается, несколько точек входа для создания заказа,
размывание зон ответственности, заказ поступает как из CRM API, так в CRM API из очереди, хотя MES - manufacturing execution system , в то время как CRM (Customer relationship management)
- MES API (External API) проблемная производительность для функционала операторов
низкая скорость отображения заказов для операторов
- Shop API и CRM API работают с одной базой ShopDB
что является антипаттерном для микросервисов, и может приводит к проблемам с маштабированием а также с неявными записимостями, и сложностями с распаралеливанием работу для разных команд (по условию компания может набирать еще людей)
- Проблемные долгие релизы, критические баги
Низкая скорость релизов по причине нахождения high или highest, что может указывать на потенциальные проблемы с тем, что внутри системы выстроены как монолиты

## Инициативы для устранения нежелательных ситуаций (в порядке приоритета)

1. *Обоснование основанное на фактах*. Хоть по расчетам проблема это MES сервис который долгими расчетами тормозит все остальные процессы. Это должно быть обоснованно. Через средства мониторинга, начать можно с простых решений типа анализа лог файлов, далее паралельно с другими задачами внедрить более сложные реализации с наблюдаемостью всей системы через единую точку сбора и трассировки. 

1. *Ревезия и установка кэширования на стороне MES UI клиентов*, чтобы снизить проблему минимальными усилиями в максимально сжатый срок
(этот компромис будет означать некий процент отказов в создании нового заказа если уже другой оператор взял его в работу, но "разблокирует их работу в целом")

1. *Отдельный ACL сервис для кэширования* (Read-Through + Write-Through) reverse proxy cache который будет кэшировать выдачу заказов операторам, обновлять кэш заказов принудительно если были http вызовы принятия заказа оператором (что должно свести к минимуму ситуации когда два оператора берут один и тот же заказ)

1. *Повышение производительности MES API* средставами более сложного кэширования через, прослушку событий в топиках об изминении состояния заказа, который уже можно будет также предоставлять информацию для B2С

1. Выделение сервиса вычесления стоимости заказа в отдельный сервис/систему для ее независимого маштабирования

1. Разделение базы ShopDB, для выделениия для CRM API отдельной CRM DB

## Обоснивание топ-3 инциатив и видение архитектуры через полгода

##### Общие расчеты
с учетом линейного роста , на 100 заказов больше в месяц, при работе в течении 12 месяцев, X+12*100=X+12000 ,
что явяляется крайне низкой нагрузкой по современным меркам, например за 10 лет, ~120000 в месяц ~400 заказов в день , 

##### 3d модели и оценка стоимости заказа
На основе модели MES. Расчёт стоимости в среднем занимает 2-3 минуты. макс 30 минут., что в среднем будет означать сутки на обработку заказа. в худщем случае 3е суток.

##### 3d модели и хранилище
если предложить что используются модели выского разрешения и детализации, ~50мб в среднем, в месяц +400*50 = ~2gb в месяц или 24gb в год, 240gb за 10 лет, что в целом является приемлимой цифрой с учетом того, что уже приложение работает s3 провайдерами облака производительность которых будет обеспечиваться облачным SaaS.

### Обоснование

Поскольку изначально известно о проблемных релизах - _"Это часто приводит к значительным задержкам релиза. Раньше задержки не превышали одного месяца, но в последнее время требуется всё больше и больше времени."_

первые 3ри задачи были обозначены как решения малой кровью для получения результатов здесь и сейчас, позволяющие выиграть время на более основательную работу по улучшению производительности.

Внедряя кеэширование на стороне клиента правки будут совсем минимальные, можно не меняя код MES, сделать это например средставами http proxy сервера , напстроив как один из вариантов nginx, далее внедряя ACL можно заложить основу для стабильной работы с B2C, и переходу к пункту 4, который будет уже более сложный и потребует более продолжительной работы над релизом

В целом работа описанная в списке инициатив в текущих реалях компании может потребовать полгода до стабильной платформы